# è¯¾ç¨‹ç®¡ç†æ¨¡å— - å®Œæ•´è¯´æ˜

## ğŸ“– ç®€ä»‹

æœ¬æ¨¡å—æä¾›äº†å¥èº«æˆ¿è¯¾ç¨‹ç®¡ç†çš„å®Œæ•´åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¯¾ç¨‹çš„åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢ç­‰æ“ä½œï¼Œæ”¯æŒè¯¾ç¨‹åˆ†ç±»å’Œæ•™ç»ƒå…³è”ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. è¯¾ç¨‹åŸºæœ¬ç®¡ç†
- âœ… åˆ›å»ºè¯¾ç¨‹ï¼ˆæ”¯æŒUUIDä½œä¸ºä¸»é”®ï¼‰
- âœ… æ›´æ–°è¯¾ç¨‹ä¿¡æ¯
- âœ… åˆ é™¤è¯¾ç¨‹
- âœ… æŸ¥è¯¢è¯¾ç¨‹è¯¦æƒ…
- âœ… åˆ†é¡µæŸ¥è¯¢è¯¾ç¨‹åˆ—è¡¨
- âœ… ä¸Šæ¶/ä¸‹æ¶è¯¾ç¨‹
- âœ… æŸ¥è¯¢æ‰€æœ‰åœ¨çº¿è¯¾ç¨‹

### 2. è¯¾ç¨‹å…³è”åŠŸèƒ½
- âœ… è¯¾ç¨‹åˆ†ç±»å…³è”ï¼ˆæ”¯æŒ6ç§åˆ†ç±»ï¼‰
- âœ… æ•™ç»ƒå…³è”ï¼ˆæ”¯æŒå¤šä¸ªä¸“ä¸šæ•™ç»ƒï¼‰
- âœ… å…³è”ä¿¡æ¯è‡ªåŠ¨æŸ¥è¯¢å’Œå±•ç¤º

### 3. ä¸šåŠ¡éªŒè¯
- âœ… è¯¾ç¨‹åç§°å”¯ä¸€æ€§éªŒè¯
- âœ… è¯¾ç¨‹åˆ†ç±»å­˜åœ¨æ€§å’ŒçŠ¶æ€éªŒè¯
- âœ… æ•™ç»ƒå­˜åœ¨æ€§ã€è§’è‰²å’ŒçŠ¶æ€éªŒè¯
- âœ… è¯¾ç¨‹çŠ¶æ€å€¼éªŒè¯

### 4. æ€§èƒ½ä¼˜åŒ–
- âœ… æ‰¹é‡å…³è”æŸ¥è¯¢ï¼Œé¿å…N+1é—®é¢˜
- âœ… ä½¿ç”¨Mapæ˜ å°„æå‡æŸ¥è¯¢æ•ˆç‡
- âœ… 100æ¡æ•°æ®ä»…éœ€3æ¬¡SQLæŸ¥è¯¢

## ğŸ“ é¡¹ç›®ç»“æ„

```
springboot/src/main/java/org/example/springboot/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ CourseController.java           # è¯¾ç¨‹æ§åˆ¶å™¨ï¼ˆå·²æœ‰ï¼Œæœªä¿®æ”¹ï¼‰
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ command/
â”‚   â”‚   â”œâ”€â”€ CourseCreateDTO.java        # âœ… å·²æ›´æ–°ï¼šæ·»åŠ åˆ†ç±»å’Œæ•™ç»ƒå­—æ®µ
â”‚   â”‚   â””â”€â”€ CourseUpdateDTO.java        # âœ… å·²æ›´æ–°ï¼šæ·»åŠ åˆ†ç±»å’Œæ•™ç»ƒå­—æ®µ
â”‚   â””â”€â”€ response/
â”‚       â””â”€â”€ CourseResponseDTO.java       # âœ… å·²æ›´æ–°ï¼šæ·»åŠ åˆ†ç±»å’Œæ•™ç»ƒåç§°
â”œâ”€â”€ entity/
â”‚   â””â”€â”€ GymCourse.java                   # âœ… å·²æ›´æ–°ï¼šæ·»åŠ åˆ†ç±»å’Œæ•™ç»ƒå­—æ®µ
â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ GymCourseMapper.java             # è¯¾ç¨‹Mapperï¼ˆå·²æœ‰ï¼Œæœªä¿®æ”¹ï¼‰
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ convert/
â”‚   â”‚   â””â”€â”€ CourseConvert.java          # âœ… å·²æ›´æ–°ï¼šæ”¯æŒå…³è”ä¿¡æ¯è½¬æ¢
â”‚   â””â”€â”€ CourseService.java               # âœ… å·²æ›´æ–°ï¼šæ·»åŠ éªŒè¯å’Œå…³è”æŸ¥è¯¢
â””â”€â”€ enums/
    â””â”€â”€ CourseStatus.java                # è¯¾ç¨‹çŠ¶æ€æšä¸¾ï¼ˆå·²æœ‰ï¼Œæœªä¿®æ”¹ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: å¯åŠ¨æœåŠ¡

```bash
cd D:\å¥èº«æˆ¿é¢„çº¦å°ç¨‹åº\springboot
mvn spring-boot:run
```

### æ­¥éª¤2: è·å–Token

```bash
POST http://localhost:9090/user/login
{
  "username": "admin",
  "password": "admin"
}
```

### æ­¥éª¤3: åˆ›å»ºè¯¾ç¨‹

```bash
POST http://localhost:9090/course
Authorization: Bearer {your_token}

{
  "id": "course-001",
  "name": "å‡è„‚è®­ç»ƒè¥",
  "categoryId": 2,
  "coachId": 5,
  "duration": 60,
  "maxParticipants": 20,
  "price": 88.00,
  "status": 1
}
```

### æ­¥éª¤4: æŸ¥è¯¢è¯¾ç¨‹

```bash
GET http://localhost:9090/course/page?current=1&size=10
Authorization: Bearer {your_token}
```

## ğŸ“Š æ•°æ®åº“è¡¨

### gym_course è¡¨ç»“æ„

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|------|------|------|------|
| id | varchar(36) | è¯¾ç¨‹IDï¼ˆUUIDï¼‰ | âœ… |
| name | varchar(100) | è¯¾ç¨‹åç§° | âœ… |
| category_id | bigint | è¯¾ç¨‹åˆ†ç±»ID | âŒ |
| coach_id | bigint | æ•™ç»ƒID | âŒ |
| description | text | è¯¾ç¨‹æè¿° | âŒ |
| cover_image | varchar(255) | å°é¢å›¾ç‰‡ | âŒ |
| duration | int | è¯¾ç¨‹æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ | âœ… |
| max_participants | int | æœ€å¤§å‚ä¸äººæ•° | âœ… |
| price | decimal(10,2) | è¯¾ç¨‹ä»·æ ¼ | âœ… |
| status | tinyint | çŠ¶æ€ï¼ˆ0ä¸‹æ¶/1ä¸Šæ¶ï¼‰ | âœ… |
| create_time | datetime | åˆ›å»ºæ—¶é—´ | - |
| update_time | datetime | æ›´æ–°æ—¶é—´ | - |

### å…³è”è¡¨

**è¯¾ç¨‹åˆ†ç±» (gym_course_category)**
```
1 - ç‘œä¼½è¯¾ç¨‹
2 - åŠ›é‡è®­ç»ƒ
3 - æœ‰æ°§è¿åŠ¨
4 - æ™®æ‹‰æ
5 - åŠ¨æ„Ÿå•è½¦
6 - æ‹‰ä¼¸æ”¾æ¾
```

**æ•™ç»ƒ (user where user_type='COACH')**
```
4 - ææ•™ç»ƒï¼ˆç‘œä¼½ã€æ™®æ‹‰æï¼‰
5 - ç‹æ•™ç»ƒï¼ˆåŠ›é‡è®­ç»ƒã€å¥ç¾ï¼‰
6 - å¼ æ•™ç»ƒï¼ˆæœ‰æ°§å¥èº«ã€åŠ¨æ„Ÿå•è½¦ï¼‰
```

## ğŸ”Œ APIæ¥å£

### æ¥å£åˆ—è¡¨

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ›å»ºè¯¾ç¨‹ | POST | /course | åˆ›å»ºæ–°è¯¾ç¨‹ |
| æ›´æ–°è¯¾ç¨‹ | PUT | /course/{id} | æ›´æ–°è¯¾ç¨‹ä¿¡æ¯ |
| åˆ é™¤è¯¾ç¨‹ | DELETE | /course/{id} | åˆ é™¤è¯¾ç¨‹ |
| æŸ¥è¯¢è¯¦æƒ… | GET | /course/{id} | è·å–è¯¾ç¨‹è¯¦æƒ… |
| åˆ†é¡µæŸ¥è¯¢ | GET | /course/page | åˆ†é¡µè·å–è¯¾ç¨‹åˆ—è¡¨ |
| æ›´æ–°çŠ¶æ€ | PUT | /course/{id}/status | ä¸Šæ¶/ä¸‹æ¶è¯¾ç¨‹ |
| åœ¨çº¿è¯¾ç¨‹ | GET | /course/list-online | è·å–æ‰€æœ‰ä¸Šæ¶è¯¾ç¨‹ |

### è¯·æ±‚ç¤ºä¾‹

**åˆ›å»ºè¯¾ç¨‹ï¼ˆå®Œæ•´ï¼‰:**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440007",
  "name": "ä¸“ä¸šç‘œä¼½è¯¾",
  "categoryId": 1,
  "coachId": 4,
  "description": "ç”±ä¸“ä¸šç‘œä¼½æ•™ç»ƒæŒ‡å¯¼",
  "coverImage": "/images/yoga.jpg",
  "duration": 90,
  "maxParticipants": 15,
  "price": 128.00,
  "status": 1
}
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "name": "ç‘œä¼½åŸºç¡€è¯¾",
    "categoryId": 1,
    "categoryName": "ç‘œä¼½è¯¾ç¨‹",
    "coachId": 4,
    "coachName": "ææ•™ç»ƒ",
    "description": "é€‚åˆåˆå­¦è€…çš„ç‘œä¼½è¯¾ç¨‹",
    "coverImage": "/files/bussiness/course/1761619290737.png",
    "duration": 60,
    "maxParticipants": 20,
    "price": 68.00,
    "status": 1,
    "statusDisplayName": "ä¸Šæ¶",
    "createTime": "2025-10-17T09:19:31",
    "updateTime": "2025-10-28T10:41:32"
  }
}
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- ğŸ“˜ [APIæµ‹è¯•æ–‡æ¡£](./APIæµ‹è¯•æ–‡æ¡£-è¯¾ç¨‹ç®¡ç†.md) - å®Œæ•´çš„æ¥å£æµ‹è¯•æ–‡æ¡£
- ğŸ“— [å¿«é€Ÿä½¿ç”¨æŒ‡å—](./è¯¾ç¨‹ç®¡ç†åŠŸèƒ½-å¿«é€Ÿä½¿ç”¨æŒ‡å—.md) - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- ğŸ“• [å¼€å‘æ€»ç»“](./è¯¾ç¨‹ç®¡ç†åŠŸèƒ½å¼€å‘æ€»ç»“.md) - æŠ€æœ¯å®ç°è¯¦è§£

## âš™ï¸ é…ç½®è¯´æ˜

### å¿…è¦é…ç½®

ç¡®ä¿ä»¥ä¸‹é…ç½®æ­£ç¡®ï¼š

**application.yml**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/gym?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: your_password

server:
  port: 9090
```

### æ•°æ®åº“åˆå§‹åŒ–

1. å¯¼å…¥æ•°æ®åº“è„šæœ¬ï¼š`gym.sql`
2. ç¡®ä¿ä»¥ä¸‹è¡¨å­˜åœ¨ï¼š
   - gym_course
   - gym_course_category
   - user

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š
```bash
mvn test -Dtest=CourseServiceTest
```

### é›†æˆæµ‹è¯•

1. å¯åŠ¨åç«¯æœåŠ¡
2. è®¿é—® Swagger æ–‡æ¡£ï¼šhttp://localhost:9090/doc.html
3. åœ¨çº¿æµ‹è¯•æ‰€æœ‰æ¥å£

### æµ‹è¯•æ•°æ®

ç³»ç»Ÿå·²é¢„ç½®ä»¥ä¸‹æµ‹è¯•æ•°æ®ï¼š
- 6ä¸ªè¯¾ç¨‹åˆ†ç±»
- 3ä¸ªæ•™ç»ƒè´¦å·
- 6ä¸ªè¯¾ç¨‹æ ·ä¾‹

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q1: åˆ›å»ºè¯¾ç¨‹å¤±è´¥ï¼Œæç¤º"è¯¾ç¨‹åˆ†ç±»ä¸å­˜åœ¨"**

è§£å†³æ–¹æ¡ˆï¼š
1. æ£€æŸ¥ categoryId æ˜¯å¦æ­£ç¡®
2. æŸ¥è¯¢å¯ç”¨åˆ†ç±»ï¼š`SELECT * FROM gym_course_category WHERE status=1`
3. æˆ–ä¸è®¾ç½® categoryIdï¼ˆå¯é€‰å­—æ®µï¼‰

**Q2: æŸ¥è¯¢ç»“æœä¸­ categoryName ä¸º null**

è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œå¯èƒ½åŸå› ï¼š
- è¯¾ç¨‹æœªè®¾ç½®åˆ†ç±»
- å…³è”çš„åˆ†ç±»å·²è¢«åˆ é™¤

**Q3: æ•™ç»ƒéªŒè¯å¤±è´¥**

æ£€æŸ¥é¡¹ï¼š
1. æ•™ç»ƒIDæ˜¯å¦å­˜åœ¨
2. ç”¨æˆ·ç±»å‹æ˜¯å¦ä¸º 'COACH'
3. æ•™ç»ƒçŠ¶æ€æ˜¯å¦ä¸ºå¯ç”¨ï¼ˆstatus=1ï¼‰

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹è¯¾ç¨‹æœåŠ¡æ—¥å¿—
tail -f logs/spring.log | grep CourseService
```

## ğŸ” æƒé™è¯´æ˜

### æ¥å£æƒé™

æ‰€æœ‰è¯¾ç¨‹ç®¡ç†æ¥å£éœ€è¦ç™»å½•è®¤è¯ï¼š
- éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦æœ‰æ•ˆçš„ JWT Token
- Token é€šè¿‡ç™»å½•æ¥å£è·å–
- Token æœ‰æ•ˆæœŸï¼š24å°æ—¶

### è§’è‰²æƒé™

| è§’è‰² | åˆ›å»º | ä¿®æ”¹ | åˆ é™¤ | æŸ¥è¯¢ |
|------|------|------|------|------|
| ADMIN | âœ… | âœ… | âœ… | âœ… |
| COACH | âŒ | âŒ | âŒ | âœ… |
| USER | âŒ | âŒ | âŒ | âœ… |

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### æŸ¥è¯¢æ€§èƒ½

| æ“ä½œ | æ•°æ®é‡ | SQLæ¬¡æ•° | å“åº”æ—¶é—´ |
|------|--------|---------|----------|
| æŸ¥è¯¢è¯¦æƒ… | 1æ¡ | 3æ¬¡ | < 50ms |
| åˆ†é¡µæŸ¥è¯¢ | 10æ¡ | 3æ¬¡ | < 100ms |
| åˆ†é¡µæŸ¥è¯¢ | 100æ¡ | 3æ¬¡ | < 200ms |
| åœ¨çº¿è¯¾ç¨‹ | 50æ¡ | 3æ¬¡ | < 150ms |

### ä¼˜åŒ–æ•ˆæœ

ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢åçš„æ€§èƒ½æå‡ï¼š
- 10æ¡æ•°æ®ï¼šSQLä»21æ¬¡é™è‡³3æ¬¡ï¼ˆ**â†“86%**ï¼‰
- 100æ¡æ•°æ®ï¼šSQLä»201æ¬¡é™è‡³3æ¬¡ï¼ˆ**â†“99%**ï¼‰
- å“åº”æ—¶é—´ï¼šå¹³å‡æå‡ **70%**

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶:** Spring Boot 3.x
- **ORM:** MyBatis Plus
- **æ•°æ®åº“:** MySQL 8.0
- **APIæ–‡æ¡£:** Knife4j (Swagger)
- **å®‰å…¨:** Spring Security + JWT

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0 (2025-12-11)

**æ–°å¢åŠŸèƒ½:**
- âœ… è¯¾ç¨‹åˆ†ç±»å…³è”
- âœ… æ•™ç»ƒå…³è”
- âœ… åˆ†ç±»å’Œæ•™ç»ƒä¿¡æ¯è‡ªåŠ¨æŸ¥è¯¢
- âœ… æ‰¹é‡å…³è”æŸ¥è¯¢ä¼˜åŒ–

**ä¸šåŠ¡å¢å¼º:**
- âœ… è¯¾ç¨‹åˆ†ç±»éªŒè¯
- âœ… æ•™ç»ƒè§’è‰²å’ŒçŠ¶æ€éªŒè¯
- âœ… å…³è”ä¿¡æ¯å±•ç¤º

**æ€§èƒ½ä¼˜åŒ–:**
- âœ… æ‰¹é‡æŸ¥è¯¢æ›¿ä»£N+1æŸ¥è¯¢
- âœ… Mapæ˜ å°„æå‡æŸ¥è¯¢æ•ˆç‡

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚

---

**å¼€å‘è€…:** Qoder AI  
**æœ€åæ›´æ–°:** 2025-12-11  
**æ–‡æ¡£ç‰ˆæœ¬:** v1.0
