# 健身数据记录功能 - 小程序端测试指南

## 📋 功能概述

小程序端已完成健身数据记录的所有页面开发，包括：
- ✅ 运动记录录入页面
- ✅ 运动历史查询页面
- ✅ 运动数据统计可视化页面
- ✅ 运动记录详情页面

---

## 🚀 测试前准备

### 1. 确认后端服务运行
确保后端服务已启动，数据库已初始化：
```bash
# 检查后端服务状态
# Spring Boot 应用应该运行在 localhost:8080
```

### 2. 检查API地址配置
确认 `uniapp/config/site.js` 中的API地址配置正确。

### 3. 登录小程序
使用测试账号登录小程序，确保有有效的token。

---

## 📝 功能测试清单

### 测试1: 运动记录录入

**测试步骤**:
1. 在首页点击「运动记录」卡片
2. 点击右下角的「+」按钮或「添加记录」按钮
3. 进入运动记录录入页面

**有氧运动测试（如：跑步）**:
1. 选择运动类型：跑步
2. 选择运动日期：今天
3. 选择开始时间：07:00
4. 选择结束时间：07:30
5. 输入时长：30分钟
6. 选择强度：中强度
7. 输入消耗热量：250千卡
8. 输入距离：5公里
9. 输入步数：6500
10. 输入平均心率：145
11. 输入最大心率：165
12. 选择感受：良好
13. 输入天气：晴天
14. 输入位置：健身房跑步机
15. 输入备注：早晨跑步，感觉不错
16. 点击「保存记录」

**预期结果**:
- 提示「运动记录添加成功」
- 自动返回到运动历史页面
- 列表中显示刚添加的记录

---

### 测试2: 运动历史查询

**测试步骤**:
1. 从首页进入「运动记录」
2. 查看运动记录列表

**功能验证**:
- ✅ 显示所有运动记录
- ✅ 每条记录显示运动类型、日期、时长、热量等信息
- ✅ 显示运动分类标签（有氧/力量）
- ✅ 显示强度和感受标签
- ✅ 点击记录可以查看详情

**筛选功能测试**:
1. 点击开始日期选择器，选择起始日期
2. 点击结束日期选择器，选择结束日期
3. 点击搜索按钮
4. 验证列表只显示指定日期范围内的记录

**分页测试**:
1. 滚动到列表底部
2. 点击「加载更多」
3. 验证加载了下一页数据

---

### 测试3: 运动记录详情

**测试步骤**:
1. 在运动历史列表中点击任意一条记录
2. 进入详情页面

**详情页验证**:
- ✅ 显示运动类型和分类
- ✅ 显示运动日期和时间范围
- ✅ 显示核心数据（时长、热量、距离等）
- ✅ 如果是力量训练，显示训练详情（动作、组数、次数等）
- ✅ 显示运动感受（强度、感受、天气、位置、备注）
- ✅ 删除按钮功能正常

**删除功能测试**:
1. 点击「删除记录」按钮
2. 弹出确认对话框
3. 点击确认
4. 验证删除成功并返回列表
5. 列表中不再显示该记录

---

### 测试4: 运动数据统计

**测试步骤**:
1. 从首页点击「运动统计」卡片
2. 进入统计页面

**汇总数据验证**:
- ✅ 显示总运动次数
- ✅ 显示总时长（分钟）
- ✅ 显示总热量（千卡）
- ✅ 显示连续运动天数

**运动分类占比**:
- ✅ 显示有氧运动占比
- ✅ 显示力量训练占比
- ✅ 进度条显示正确

**数据趋势图**:
- ✅ 运动时长趋势图正常显示
- ✅ 热量消耗趋势图正常显示
- ✅ X轴显示日期（MM-DD格式）
- ✅ Y轴显示数值

**日期筛选**:
1. 点击「近7天」标签 - 验证显示最近7天数据
2. 点击「近30天」标签 - 验证显示最近30天数据
3. 点击「近90天」标签 - 验证显示最近90天数据

**周期统计**:
- ✅ 显示本周运动次数
- ✅ 显示本月运动次数
- ✅ 显示平均时长
- ✅ 显示总运动天数

---

## 🎯 完整测试场景

### 场景1: 创建一周运动记录

**目标**: 验证数据统计的准确性

**步骤**:
1. 周一：创建跑步记录（30分钟，250千卡）
2. 周二：创建深蹲记录（45分钟，180千卡）
3. 周三：创建游泳记录（40分钟，300千卡）
4. 周四：创建卧推记录（50分钟，200千卡）
5. 周五：创建骑行记录（60分钟，400千卡）
6. 周六：创建瑜伽记录（30分钟，100千卡）
7. 查看运动统计页面

**验证点**:
- 总运动次数 = 6次
- 总时长 = 255分钟
- 总热量 = 1430千卡
- 连续运动天数 = 6天
- 本周运动次数 = 6次
- 有氧运动占比 = 50%（3次有氧 / 6次总计）
- 力量训练占比 = 33.3%（2次力量 / 6次总计）

---

### 场景2: 力量训练记录

**目标**: 验证力量训练详情记录功能

**步骤**:
1. 点击添加运动记录
2. 选择运动类型：深蹲
3. 填写基本信息（日期、时间、时长等）
4. 后端接口已支持力量训练详情，前端暂不显示录入界面
5. 创建成功后查看详情
6. 验证基本信息显示正确

**说明**: 
当前版本力量训练详情需要通过后端API直接创建，小程序端可以查看但暂未提供录入界面。如需添加力量训练详情录入功能，可在后续版本中扩展。

---

### 场景3: 数据筛选和查询

**目标**: 验证筛选和查询功能

**步骤**:
1. 创建多条不同日期的运动记录
2. 在运动历史页面设置日期范围筛选
3. 点击搜索
4. 验证只显示指定日期范围内的记录
5. 测试分页加载功能

---

## ⚠️ 注意事项

### 1. 日期格式
- 日期格式：`yyyy-MM-dd`（如：2025-12-12）
- 时间格式：`HH:mm`（如：07:00）
- 日期时间格式：`yyyy-MM-dd HH:mm:ss`（如：2025-12-12 07:00:00）

### 2. 数值范围
- 时长：建议 5-300 分钟
- 热量：建议 50-2000 千卡
- 距离：建议 0.1-50 公里
- 心率：建议 60-200 bpm

### 3. 枚举值
- **运动分类**: CARDIO(有氧), STRENGTH(力量), FLEXIBILITY(柔韧), SPORTS(运动), OTHER(其他)
- **强度**: LOW(低强度), MEDIUM(中强度), HIGH(高强度)
- **感受**: GREAT(非常好), GOOD(良好), NORMAL(一般), TIRED(疲惫), BAD(不佳)

### 4. 触发器验证
每次创建、更新或删除运动记录后，数据库触发器会自动更新每日统计数据。验证方法：
1. 创建一条运动记录
2. 查看运动统计页面
3. 确认统计数据已更新
4. 删除该记录
5. 再次查看统计页面
6. 确认统计数据已相应减少

---

## 🔍 常见问题排查

### 问题1: 添加记录失败
**排查步骤**:
1. 检查必填项是否都已填写（运动类型、日期、时间、时长）
2. 查看控制台错误信息
3. 检查后端服务是否正常运行
4. 检查用户是否已登录

### 问题2: 统计数据不准确
**排查步骤**:
1. 检查数据库触发器是否正常
2. 查看数据库中 `gym_workout_daily_stats` 表的数据
3. 尝试手动删除统计数据，让触发器重新生成

### 问题3: 图表不显示
**排查步骤**:
1. 检查是否有运动记录数据
2. 查看控制台是否有报错
3. 确认 qiun-data-charts 组件已正确安装
4. 尝试切换日期范围标签

### 问题4: 加载更多不工作
**排查步骤**:
1. 检查是否已经是最后一页
2. 查看网络请求是否成功
3. 检查返回数据的分页信息

---

## 📊 测试报告模板

### 功能测试结果

| 功能模块 | 测试项 | 测试结果 | 备注 |
|---------|--------|---------|------|
| 运动记录录入 | 创建有氧运动记录 | ✅/❌ | |
| 运动记录录入 | 创建力量训练记录 | ✅/❌ | |
| 运动历史查询 | 查看记录列表 | ✅/❌ | |
| 运动历史查询 | 日期筛选 | ✅/❌ | |
| 运动历史查询 | 分页加载 | ✅/❌ | |
| 运动记录详情 | 查看详情 | ✅/❌ | |
| 运动记录详情 | 删除记录 | ✅/❌ | |
| 运动数据统计 | 汇总数据显示 | ✅/❌ | |
| 运动数据统计 | 分类占比 | ✅/❌ | |
| 运动数据统计 | 趋势图表 | ✅/❌ | |
| 运动数据统计 | 日期切换 | ✅/❌ | |

### 发现的问题

1. 【问题描述】
   - 重现步骤：
   - 预期结果：
   - 实际结果：
   - 优先级：高/中/低

---

## 📞 技术支持

如有问题，请参考：
1. API测试文档: `springboot/API测试文档-健身数据记录.md`
2. 后端快速使用指南: `springboot/健身数据记录功能-快速使用指南.md`
3. 控制台日志输出

---

**文档版本**: v1.0  
**创建日期**: 2025-12-12  
**维护者**: System
